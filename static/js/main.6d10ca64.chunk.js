(this["webpackJsonpplanning-board"]=this["webpackJsonpplanning-board"]||[]).push([[0],{140:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(7),o=a(28),s=a(29),c=a(33),i=a(30),l=a(34),m=a(11),d=a(1),u=a.n(d),b=a(9),p=a.n(b),f=(a(97),a(98),a(12)),g=a(26),k={name:["ALMA","Bremen","Clover","Crystal","Jade","Martian","Raccoon Squat","Sapphire","Zen1"],ALMA:["Judy","Lihan","Prophet"],Bremen:["Andy","Chaotsung","Freddie","Mesh","Roy","Wisdom"],Clover:["Alvin","Chuck","David","Jack","Mavis","Tim","Rebecca","Shawn"],Crystal:["Link","Darek","Carol","Emily","Minie","Joey","Harrison","Jimmy","Lighter","Alfred","Ethan"],Jade:["Howard","Jason","NI","Sen","Tony","ChienYu","YingYu","YuHsuan"],Martian:["Alan","Andrew","Colby"],"Raccoon Squat":["Askeing","Carpusher","Matt","David","Jack","Ryan","Smiler","Ethan","Hill"],Sapphire:["James Hsiao","Yvon","Nate","Sudio","Jerry","Roger","James Lin"],Zen1:["Todd","Paul","Iris","David","Charles","Trista","Zion","Cary"]},v=a(142),y=a(145),h=a(87),O=a(146),j=[-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14];function E(){var e=Object(m.a)(["\n  float: right;\n  margin-top: -2px;\n  margin-bottom: 8px;\n"]);return E=function(){return e},e}function x(){var e=Object(m.a)(["\n  width: 100%;\n  border: none;\n  border-radius: 5px;\n  padding: 8px;\n  background-color: ",";\n"]);return x=function(){return e},e}var S=f.a.div(x(),(function(e){return e.isDragging?"lightyellow":"white"})),I=f.a.div(E()),T=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.task,a=e.index,n=e.member,r=e.onSelectTaskDay,o=e.onDeleteTask,s=e.day,c=e.onTaskInputChange;return u.a.createElement(g.b,{draggableId:t.id,index:a},(function(e,a){return u.a.createElement(S,Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef,isDragging:a.isDragging}),u.a.createElement(O.a.Control,{as:"textarea",value:t.content,className:"task-form-textarea",onChange:function(e){c(e.target.value,t.id)}}),u.a.createElement(I,null,u.a.createElement(y.a,{onSelect:function(e){e<0?o(t.id,e,n):r(t.id,e,n)}},u.a.createElement(y.a.Toggle,{variant:"outline-secondary",size:"sm",className:"day-dropdown-button"},s),u.a.createElement(y.a.Menu,null,j.map((function(e){return u.a.createElement(y.a.Item,{key:e,eventKey:e},e)}))))))}))}}]),t}(d.Component);a(79);function C(){var e=Object(m.a)(["\n  width: 150px;\n  transition: background-color 0.2s ease;\n  background-color: ",";\n  min-height: 480px\n"]);return C=function(){return e},e}function D(){var e=Object(m.a)(["\n  float: right;\n  clear: both;\n  margin-right: 4px;\n  margin-bottom: 4px;\n"]);return D=function(){return e},e}function w(){var e=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return w=function(){return e},e}function A(){var e=Object(m.a)(["\n  margin-bottom: -6px;\n  padding: 8px;\n  text-align: center;\n  color: SteelBlue;\n"]);return A=function(){return e},e}function N(){var e=Object(m.a)(["\n  width: 100%;\n"]);return N=function(){return e},e}function J(){var e=Object(m.a)(["\n  margin: 8px;\n  background-color: white;\n  border-radius: 4px;\n  border: 1px solid lightgrey;\n  width: 160px;\n"]);return J=function(){return e},e}var M=f.a.div(J()),B=f.a.div(N()),R=f.a.h5(A()),H=f.a.div(w()),P=f.a.div(D()),L=f.a.div(C(),(function(e){return e.isDraggingOver?"lightblue":"inherit"})),F=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.tasks!==this.props.tasks}},{key:"render",value:function(){var e=this.props,t=e.tasks,a=e.onSelectTaskDay,n=e.member,r=e.onTaskInputChange,o=e.onDeleteTask;return t.map((function(e,t){return u.a.createElement(T,{key:e.id,task:e,index:t,day:e.day,member:n,onSelectTaskDay:a,onTaskInputChange:r,onDeleteTask:o})}))}}]),t}(d.Component),U=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.member,a=e.index,n=e.tasks,r=e.onSelectTaskDay,o=e.onAddTask,s=e.onTaskInputChange,c=e.overloading,i=e.onSelectMemberDay,l=e.onDeleteTask,m=e.day,d=m;return n.forEach((function(e){d-=e.day})),u.a.createElement(g.b,{draggableId:t,index:a},(function(e){return u.a.createElement(M,Object.assign({},e.draggableProps,{ref:e.innerRef}),u.a.createElement(B,null,u.a.createElement(R,e.dragHandleProps,t),u.a.createElement(H,null,m&&u.a.createElement(v.a,{variant:c?"danger":"info"},d," days left"),u.a.createElement(y.a,{onSelect:function(e){i(e,t)}},u.a.createElement(y.a.Toggle,{variant:"outline-secondary",id:"dropdown-basic",size:"sm",className:"day-dropdown-button"},m||"Days"),u.a.createElement(y.a.Menu,null,j.map((function(e){return u.a.createElement(y.a.Item,{key:e,eventKey:e},e)})))))),u.a.createElement(g.c,{droppableId:t,type:"task"},(function(e,a){return u.a.createElement(L,Object.assign({},e.droppableProps,{ref:e.innerRef,isDraggingOver:a.isDraggingOver}),u.a.createElement(F,{tasks:n,onSelectTaskDay:r,member:t,onTaskInputChange:s,onDeleteTask:l}),u.a.createElement(P,null,m&&u.a.createElement(h.a,{variant:"light",size:"sm",className:"add-task-button",onClick:o},"Add Task")),e.placeholder)})))}))}}]),t}(d.Component),Y=a(89),z=a(148),K=a(147),Z=a(143),q=a(144),W=a(88),G=a(64);function Q(){var e=Object(m.a)(["\n  border-radius: 50%;\n  width: 38px;\n  height: 38px;\n  border: 2px solid;\n  text-align: center;\n  margin-left: 8px;\n  color: black;\n  font: 22px Arial;\n  outline: none;\n  :focus {\n    outline: none;\n  }\n  :active {\n    border: 2px solid lightgrey;\n    color: lightgrey;\n  }\n"]);return Q=function(){return e},e}function V(){var e=Object(m.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  margin: 8px;\n  position: absolute;\n  bottom: 0px;\n  right: 0px;\n"]);return V=function(){return e},e}var X=f.a.div(V()),$=f.a.button(Q());function _(e){var t=e.onClickImport,a=e.onSelectTeam,n=e.selectedTeam,r=Object(d.useState)(!1),o=Object(Y.a)(r,2),s=o[0],c=o[1],i=function(){return c(!1)};return u.a.createElement(u.a.Fragment,null,u.a.createElement(z.a,{bg:"dark",sticky:"top",className:"nav-toolbar"},u.a.createElement(z.a.Brand,null,"Planning Board"),u.a.createElement(X,null,u.a.createElement(K.a,{placement:"auto",overlay:u.a.createElement(Z.a,null,"Clean Board")},u.a.createElement($,{onClick:function(){return c(!0)}},u.a.createElement(W.a,null))),u.a.createElement(K.a,{placement:"bottom",overlay:u.a.createElement(Z.a,null,"Export")},u.a.createElement($,{onClick:function(){return function(e,t,a){var n=document.createElement("a"),r=new Blob([e],{type:a});n.href=URL.createObjectURL(r),n.download=t,n.click()}(JSON.stringify(JSON.parse(localStorage.getItem("planningBoard")),null,2),"planning-board.txt","text/plain")}},u.a.createElement(G.a,null))),u.a.createElement(K.a,{placement:"bottom",overlay:u.a.createElement(Z.a,null,"Import .txt")},u.a.createElement($,{onClick:t},u.a.createElement(G.b,null))),u.a.createElement(y.a,{onSelect:function(e){return a(e)}},u.a.createElement(y.a.Toggle,{variant:"info"},n||"Select Team"),u.a.createElement(y.a.Menu,null,k.name.map((function(e){return u.a.createElement(y.a.Item,{key:e,eventKey:e,className:"team-dropdown-item"},e)})))))),u.a.createElement(q.a,{centered:!0,show:s,onHide:i},u.a.createElement(q.a.Header,{closeButton:!0},u.a.createElement(q.a.Title,null,"Confirmation")),u.a.createElement(q.a.Body,null,"Are you sure you want to clean this board?"),u.a.createElement(q.a.Footer,null,u.a.createElement(h.a,{variant:"secondary",onClick:i},"Cancel"),u.a.createElement(h.a,{variant:"danger",onClick:function(){i(),localStorage.clear("planningBoard"),window.location.reload()}},"Clean"))))}var ee=function(){return Math.random().toString(36).substring(7)};function te(){var e=Object(m.a)(["\n  display: flex;\n  overflow: auto;\n  margin-right: 8px;\n"]);return te=function(){return e},e}var ae=f.a.div(te()),ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var s=arguments.length,l=new Array(s),m=0;m<s;m++)l[m]=arguments[m];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state=localStorage.getItem("planningBoard")?JSON.parse(localStorage.getItem("planningBoard")):{selectedTeam:"",memberOrder:[],members:{},tasks:{}},a.onDragEnd=function(e){var t,o=e.destination,s=e.source,c=e.draggableId,i=e.type;if(o&&(o.droppableId!==s.droppableId||o.index!==s.index)){if("member"===i){var l=Array.from(a.state.memberOrder);return l.splice(s.index,1),l.splice(o.index,0,c),void a.setState({memberOrder:l})}var m=a.state.members[s.droppableId],d=a.state.members[o.droppableId];if(m!==d){var u=Array.from(m.taskIds);u.splice(s.index,1);var b=Number(a.state.members[m.id].day),p=0;u.forEach((function(e){p+=Number(a.state.tasks[e].day)}));var f=Object(r.a)({},m,{taskIds:u,overloading:p>b}),g=Array.from(d.taskIds);g.splice(o.index,0,c);var k=Number(a.state.members[d.id].day),v=0;g.forEach((function(e){v+=Number(a.state.tasks[e].day)}));var y=Object(r.a)({},d,{taskIds:g,overloading:v>k}),h=Object(r.a)({},a.state.members,(t={},Object(n.a)(t,f.id,f),Object(n.a)(t,y.id,y),t));a.setState({members:h})}else{var O=a.state.members[s.droppableId],j=Array.from(O.taskIds);j.splice(s.index,1),j.splice(o.index,0,c);var E=Object(r.a)({},O,{taskIds:j}),x=Object(r.a)({},a.state.members,Object(n.a)({},s.droppableId,E));a.setState({members:x})}}},a.onTeamSelect=function(e){var t=k[e].reduce((function(e,t){return e[t]={id:t,day:null,taskIds:[]},e}),{});a.setState({selectedTeam:e,memberOrder:k[e],members:t})},a.onSelectMemberDay=function(e,t,o){var s=ee(),c=Number(e);if(c<0){var i=a.state.memberOrder.filter((function(e){return e!==t}));return a.state.members[t].taskIds.forEach((function(e){delete a.state.tasks[e]})),delete a.state.members[t],void a.setState({members:a.state.members,memberOrder:i,tasks:a.state.tasks})}var l=0;if(a.state.members[t].taskIds.forEach((function(e){l+=Number(a.state.tasks[e].day)})),o||0!==a.state.members[t].taskIds.length){var m=Object(r.a)({},a.state.members[t],{day:e,overloading:l>c}),d=Object(r.a)({},a.state.members,Object(n.a)({},t,m));a.setState({members:d})}else a.setState(Object(r.a)({},a.state,{tasks:Object(r.a)({},a.state.tasks,Object(n.a)({},s,{id:s,content:"",day:null})),members:Object(r.a)({},a.state.members,Object(n.a)({},t,Object(r.a)({},a.state.members[t],{day:e,taskIds:[s],overloading:l>c})))}))},a.onDeleteTask=function(e,t,o){var s=Array.from(a.state.members[o].taskIds),c=s.indexOf(e);s.splice(c,1),delete a.state.tasks[e];var i=Number(a.state.members[o].day),l=0;s.forEach((function(e){l+=Number(a.state.tasks[e].day)})),a.setState(Object(r.a)({},a.state,{tasks:a.state.tasks,members:Object(r.a)({},a.state.members,Object(n.a)({},o,Object(r.a)({},a.state.members[o],{taskIds:s,overloading:l>i})))}))},a.onSelectTaskDay=function(e,t,o){var s=Number(a.state.members[o].day),c=Number(t),i=Object(r.a)({},a.state.tasks,Object(n.a)({},e,Object(r.a)({},a.state.tasks[e],{day:t})));a.setState(Object(r.a)({},a.state,{tasks:i})),a.state.members[o].taskIds.forEach((function(t){e!==t&&(c+=Number(a.state.tasks[t].day))}));var l=Object(r.a)({},a.state.members[o],{overloading:c>s}),m=Object(r.a)({},a.state.members,Object(n.a)({},o,l));a.setState({members:m})},a.onAddTask=function(e){var t=Array.from(a.state.members[e].taskIds),o=ee();t.push(o),a.setState(Object(r.a)({},a.state,{tasks:Object(r.a)({},a.state.tasks,Object(n.a)({},o,{id:o,content:"",day:null})),members:Object(r.a)({},a.state.members,Object(n.a)({},e,Object(r.a)({},a.state.members[e],{taskIds:t})))}))},a.onTaskInputChange=function(e,t){var o=Object(r.a)({},a.state.tasks,Object(n.a)({},t,Object(r.a)({},a.state.tasks[t],{content:e})));a.setState(Object(r.a)({},a.state,{tasks:o}))},a.onClickImport=function(){var e=document.createElement("input");e.type="file",e.onchange=a.readImportedTask,e.click()},a.readImportedTask=function(e){var t=e.target.files[0];if(t.type.match(/text.*/)){var n=new FileReader;n.onload=function(e){var t=e.target.result;a.setState(JSON.parse(t))},n.readAsText(t)}else alert("Unsupported file format")},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state!==t&&localStorage.setItem("planningBoard",JSON.stringify(this.state))}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedTeam,n=t.memberOrder,r=t.members,o=t.tasks;return console.log(this.state),u.a.createElement(u.a.Fragment,null,u.a.createElement(_,{onClickImport:this.onClickImport,onSelectTeam:function(t){return e.onTeamSelect(t)},selectedTeam:a}),a&&u.a.createElement(g.a,{onDragEnd:this.onDragEnd},u.a.createElement(g.c,{droppableId:"team-member-list",direction:"horizontal",type:"member"},(function(t){return u.a.createElement(ae,Object.assign({},t.droppableProps,{ref:t.innerRef}),n.map((function(t,n){return u.a.createElement(U,{key:"".concat(a,"-").concat(t),index:n,member:t,overloading:r[t].overloading,onAddTask:function(){return e.onAddTask(t)},day:r[t].day,tasks:r[t].taskIds.map((function(e){return o[e]})),onSelectMemberDay:function(t,a){return e.onSelectMemberDay(t,a,r[a].day)},onSelectTaskDay:function(t,a,n){return e.onSelectTaskDay(t,a,n)},onDeleteTask:function(t,a,n){return e.onDeleteTask(t,a,n)},onTaskInputChange:function(t,a){return e.onTaskInputChange(t,a)}})})),t.placeholder)}))))}}]),t}(d.Component);p.a.render(u.a.createElement(ne,null),document.getElementById("root"))},79:function(e,t,a){},92:function(e,t,a){e.exports=a(140)}},[[92,1,2]]]);
//# sourceMappingURL=main.6d10ca64.chunk.js.map